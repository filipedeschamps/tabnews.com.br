## 30/07/21 - Milestone 1 (ENCERRAMENTO)

Mais uma [Live de encerramento](https://youtu.be/rVsYU9HyREM) simplesmente **SENSACIONAL** com direito a revisitar vários tópicos **fundamentais** do projeto e até fazer deploy de um Banco de Dados em Produção (numa sexta-feira). Outro detalhe legal foi toda ajuda que a turma foi dando pelo chat durante a Live de algumas dúvidas que foram surgindo. Eu realmente sou apaixonado por eles e não troco por ninguém!!! Bom, vamos ao resumo dos principais tópicos:

1. **[Por que estou feliz? (10:00)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=599)** - Começo a Live de fato falando algums motivos que me fazem estar muito feliz, onde em resumo: **1)** O projeto do TabNews está me dando oportunidade de aprender muita coisa, mas com um detalhe especial que é **registrar tudo em tempo-real**, desde a primeira issue criada no repositório até essas Lives e as entradas no Diário aqui do README. E isso vai se manter para todos os próximos tópicos, como Autenticação/Autorização e vai se tornar um excelente material de referência para qualquer outro projeto futuro. **2)** Falando em projetos futuros, a fundação que está sendo criada no repositório do TabNews pode servir para vários tipos de projetos que qualquer pessoa queira fazer e aproveitar ou código ou os conhecimentos. **3)** Por último, estou feliz porque na Milestone a seguir, a [Milestone 2](https://github.com/filipedeschamps/tabnews.com.br/milestone/3) já teremos conteúdo pra valer na Home do site.
2. **[Como instalar e rodar o projeto (14:00)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=840)** - Bastante simples esse item, pois basta você ter na sua máquina Node.js e Docker (com Docker Compose), clonar o repositório, instalar as dependências e rodar `npm run dev` que todo o ambiente vai subir para você continuar o desenvolvimento.
3. [Testes automatizados e CI (33:43)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=2023) - Novamente bastante simples, uma vez que você pode rodar os testes pelo comando `npm test` ou `npm run test:watch` caso queira rodá-los de forma interativa. Mas o legal é que isso foi implementado **duas vezes**, uma [por esse PR](https://github.com/filipedeschamps/tabnews.com.br/pull/76) onde a estratégia era subir todos os serviços dependentes por dentro do script de teste, e [por esse outro PR](https://github.com/filipedeschamps/tabnews.com.br/pull/82) onde subir esses serviços foi removido do código e delegado para camada de infraestrutura que abraça os testes (e ficou **muito** melhor e mais resistente). Vale muito a pena entrar no primeiro PR para acompanhar a discussão, e no segundo PR para acompanhar a resolução. Outro detalhe nesta parte foi a descoberta do [act](https://github.com/nektos/act) que simula o ambiente do Github Actions, o que é ótimo para não precisar ficar marretando o seu repositório com pushes ou pull requests para implementar as Actions.
4. [Padrão de Linting de Code Style e Commits (1:06:32)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=3992) - Isso não é obrigatório, mas bastante necessário caso você não queira perder o controle e padronização do seu projeto. Na parte Code Style que você pode verificar [nesse PR](https://github.com/filipedeschamps/tabnews.com.br/pull/79) é feito o linting pelo `eslint` integrado diretamente ao `next` a partir da versão `11` e também pelo `prettier`. Já para parte de commits, [esse PR](https://github.com/filipedeschamps/tabnews.com.br/pull/80) implementa o uso de [Conventional Commits](https://www.conventionalcommits.org/), além de adicionar uma ferramenta chamada `cz` que pode ser acionada pelo comando `npm run commit` e que auxilia as pessoas a criarem as mensagens no formato certo. E ter um padrão de commits é ótimo para fazermos changelogs automatizados. Fora isso, vale a pena destacar [a issue](https://github.com/filipedeschamps/tabnews.com.br/issues/42) que discute várias sugestões sobre esse assunto e também a padronização de outras coisas dentro do Github e que não foram implementadas nessa Milestone.
5. [Arquitetura e Pastas (1:18:36)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=4716) - Como o projeto está num estágio pequeno, não deu para desenvolver muito o assunto na Live, porém [essa issue](https://github.com/filipedeschamps/tabnews.com.br/issues/12) tem uma discussão **sensacional** sobre o assunto, inclusive numa ideia que o Next.js nos travou.
6. [Mudança de Licença (1:19:12)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=5352) - Não vai ter issue melhor que [essa aqui](https://github.com/filipedeschamps/tabnews.com.br/issues/64) para explicar o que aconteceu, pois a conversa lá foi de **altíssimo** nível. Mas em resumo, saímos da licença `MIT` para a `GPLv3`.
7. [(1:31:25)](https://youtu.be/rVsYU9HyREM?list=PLMdYygf53DP7VRIRKmkSdGuDf-6OXcj4H&t=5481) - E esse foi o momento mais massa da Live, onde a gente deleta o banco de Produção, cria de novo e configura as variáveis de ambiente. Com isso, foi possível rodar as migrations pela primeira vez em ambiente de Produção e quem conseguiu fazer isso (dado que apenas **uma única pessoa** iria conseguir rodar), foi o [huogerac](https://github.com/huogerac), e ele tirou um print do retorno `201` e eu coloquei esse print logo alí em baixo, inclusive logo depois a minha reação de nem ter conseguido listar as migrations pendentes. Vale a pena destacar também [a issue](https://github.com/filipedeschamps/tabnews.com.br/issues/84) que mostra e resolve alguns problemas de conexão, e também [a issue](https://github.com/filipedeschamps/tabnews.com.br/issues/61) que definiu a DigitalOcean como a provedora do banco e os motivos de usar Postgres sem ORM.

![image](https://user-images.githubusercontent.com/4248081/127724683-a789527c-2d33-4c0c-9167-94ab6ab647c0.png)
![image](https://user-images.githubusercontent.com/4248081/127724792-b5a379f7-af50-4160-92cc-4e6365ffc268.png)
